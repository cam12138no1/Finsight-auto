# 财报自动化下载系统 - 需求文档

## 📋 项目概述

### 项目名称
AI行业上市公司财报自动化下载系统

### 项目目标
开发一个自动化工具，用于批量下载AI应用公司和AI供应链公司的财务报告（季报、年报），支持按年份和季度精确筛选。

---

## 🎯 核心需求

### 1. 公司覆盖范围

#### AI应用公司（10家）
- Microsoft (MSFT)
- Google/Alphabet (GOOGL)
- Amazon (AMZN)
- Meta (META)
- Salesforce (CRM)
- ServiceNow (NOW)
- Palantir (PLTR)
- Apple (AAPL)
- AppLovin (APP)
- Adobe (ADBE)

#### AI供应链公司（14家）
- Nvidia (NVDA)
- AMD
- Broadcom (AVGO)
- TSMC (TSM)
- SK Hynix
- Micron (MU)
- Samsung
- Intel (INTC)
- Vertiv (VRT)
- Eaton (ETN)
- GE Vernova (GEV)
- Vistra (VST)
- ASML
- Synopsys (SNPS)

---

## 🔧 功能需求

### 功能1：时间范围筛选

#### 1.1 年度筛选
- **需求描述**：用户可以选择特定年份或年份范围
- **输入方式**：
  - 单个年份：`2024`
  - 年份范围：`2022-2024`
  - 多个年份：`2022,2023,2024`
- **支持范围**：2020年至今

#### 1.2 季度筛选
- **需求描述**：用户可以选择特定季度
- **季度类型**：
  - Q1（第一季度，1-3月）
  - Q2（第二季度，4-6月）
  - Q3（第三季度，7-9月）
  - Q4（第四季度，10-12月）
  - FY（全年年报）
- **输入方式**：
  - 单个季度：`Q1`
  - 多个季度：`Q1,Q2,Q3,Q4`
  - 所有季度：`ALL`

#### 1.3 组合筛选示例
```
年份: 2024
季度: Q1,Q2
结果: 下载2024年Q1和Q2的财报

年份: 2023-2024
季度: Q4
结果: 下载2023年Q4和2024年Q4的财报

年份: 2024
季度: ALL
结果: 下载2024年所有季度的财报
```

---

### 功能2：智能文件识别

#### 2.1 财报类型识别
系统需要能够识别以下财报类型：
- **季度报告**：10-Q, Quarterly Results, Q1/Q2/Q3/Q4 Earnings
- **年度报告**：10-K, Annual Report, FY Results
- **财报发布**：Earnings Release, Financial Results
- **投资者演示**：Investor Presentation, Earnings Slides

#### 2.2 文件名模式匹配
系统应能识别常见的文件名模式：
```
- MSFT_FY24_Q2_Earnings.pdf
- NVDA-Q1-FY2024-Earnings-Release.pdf
- AAPL-Q4-2023-Results.pdf
- 10-Q_Q1_2024.pdf
- Annual-Report-2023.pdf
```

#### 2.3 时间戳提取
从文件名或元数据中提取：
- 年份（4位数字）
- 季度标识（Q1/Q2/Q3/Q4/FY）
- 发布日期

---

### 功能3：批量下载管理

#### 3.1 公司选择
- **全选模式**：下载所有24家公司
- **分类选择**：
  - 仅AI应用公司（10家）
  - 仅AI供应链公司（14家）
- **自定义选择**：手动选择特定公司

#### 3.2 下载策略
- **并发下载**：支持多线程下载（可配置并发数）
- **断点续传**：已下载文件自动跳过
- **重试机制**：失败自动重试3次
- **速率限制**：避免对服务器造成压力（每个请求间隔1-2秒）

#### 3.3 文件组织
```
earnings_reports/
├── AI_Applications/
│   ├── Microsoft/
│   │   ├── 2024_Q1_MSFT_Earnings.pdf
│   │   ├── 2024_Q2_MSFT_Earnings.pdf
│   │   └── 2024_Q3_MSFT_Earnings.pdf
│   ├── Nvidia/
│   └── ...
├── AI_Supply_Chain/
│   ├── Nvidia/
│   ├── AMD/
│   └── ...
└── download_log.json
```

---

## 💻 技术需求

### 4.1 运行环境
- Python 3.8+
- Chrome浏览器 + ChromeDriver
- 网络连接

### 4.2 依赖库
```python
requests>=2.31.0
beautifulsoup4>=4.12.0
selenium>=4.15.0
pandas>=2.0.0
tqdm>=4.66.0
```

### 4.3 配置文件
支持JSON配置文件：
```json
{
  "download_dir": "earnings_reports",
  "years": [2023, 2024],
  "quarters": ["Q1", "Q2", "Q3", "Q4"],
  "companies": ["Microsoft", "Nvidia", "AMD"],
  "concurrent_downloads": 3,
  "retry_times": 3,
  "timeout": 30
}
```

---

## 🎨 用户界面需求

### 5.1 命令行模式
```bash
# 交互式选择
python download_earnings.py --interactive

# 命令行参数
python download_earnings.py --years 2023,2024 --quarters Q1,Q2 --companies Microsoft,Nvidia

# 配置文件
python download_earnings.py --config config.json
```

### 5.2 交互式菜单示例
```
=== 财报下载系统 ===

[1] 选择年份
    当前: 2024
    
[2] 选择季度
    当前: Q1, Q2, Q3, Q4
    
[3] 选择公司
    当前: 所有公司 (24家)
    
[4] 开始下载

[0] 退出

请选择操作 [0-4]:
```

---

## 📊 输出需求

### 6.1 进度显示
- 实时显示当前处理的公司
- 显示下载进度条
- 显示成功/失败统计

### 6.2 日志记录
生成详细的下载日志：
```json
{
  "download_time": "2024-02-06 10:30:00",
  "total_files": 48,
  "successful": 45,
  "failed": 3,
  "details": [
    {
      "company": "Microsoft",
      "year": 2024,
      "quarter": "Q1",
      "status": "success",
      "file_path": "earnings_reports/AI_Applications/Microsoft/2024_Q1_MSFT.pdf",
      "file_size": "2.4MB"
    }
  ]
}
```

### 6.3 汇总报告
下载完成后生成Excel汇总表：
- 公司名称
- 年份季度
- 文件名
- 文件大小
- 下载状态
- 下载时间

---

## ⚠️ 异常处理需求

### 7.1 网络异常
- 连接超时：自动重试
- DNS解析失败：记录并跳过
- 403/404错误：记录并继续

### 7.2 文件异常
- 文件格式错误：提示并跳过
- 磁盘空间不足：提前检查并警告
- 文件名冲突：自动重命名（添加序号）

### 7.3 数据异常
- 找不到PDF链接：记录并继续
- 页面结构变化：尝试多种匹配策略
- 验证码/登录墙：提示用户手动处理

---

## 📈 性能需求

### 8.1 响应时间
- 单个公司处理时间：< 30秒
- 全量下载（24家公司，4个季度）：< 30分钟

### 8.2 资源占用
- 内存占用：< 500MB
- CPU占用：< 50%
- 网络带宽：自适应

---

## 🔒 安全需求

### 9.1 数据安全
- 仅下载公开可访问的财报
- 不存储任何登录凭证
- 遵守robots.txt规则

### 9.2 隐私保护
- 不收集用户个人信息
- 日志文件仅保存在本地
- 支持清理缓存功能

---

## 🚀 扩展需求（可选）

### 10.1 数据分析
- 自动提取关键财务指标
- 生成趋势对比图表
- 营收、利润同比环比分析

### 10.2 通知功能
- 下载完成邮件通知
- 失败重试提醒
- 新财报发布监控

### 10.3 云端同步
- 支持上传到云存储（Google Drive, OneDrive）
- 自动备份到NAS
- 团队共享功能

---

## 📝 验收标准

### 功能验收
- ✅ 能够正确筛选指定年份和季度的财报
- ✅ 能够下载至少90%的目标文件
- ✅ 文件命名规范，目录结构清晰
- ✅ 下载进度实时显示
- ✅ 生成完整的下载日志

### 性能验收
- ✅ 单个公司处理时间 < 30秒
- ✅ 全量下载时间 < 30分钟
- ✅ 内存占用 < 500MB

### 稳定性验收
- ✅ 网络中断能够自动恢复
- ✅ 异常情况不会导致程序崩溃
- ✅ 支持中断后继续下载

---

## 📅 项目时间线

### 第一阶段（核心功能）
- 基础下载功能
- 年份/季度筛选
- 文件识别和匹配

### 第二阶段（增强功能）
- 交互式界面
- 批量管理
- 日志和报告

### 第三阶段（优化扩展）
- 性能优化
- 数据分析
- 云端同步

---


